<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imprimir Estudiante</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body class="body-imprimir">
    <div id="content" class="recuadro">
        <p class="text-center">Cargando datos...</p>
    </div>

    <div class="no-print">
        <button onclick="window.print()" class="btn-imprimir-action">Imprimir</button>
        <button onclick="window.close()" class="btn-imprimir-action btn-cerrar-action">Cerrar</button>
    </div>

    <script>
        const { ipcRenderer } = require('electron');

        ipcRenderer.on('datos-impresion', (event, estudiante) => {
            const content = document.getElementById('content');
            content.innerHTML = `
                <div class="foto-imprimir">
                    <img src="${estudiante.foto || 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"128\" height=\"128\" viewBox=\"0 0 128 128\"><rect width=\"128\" height=\"128\" rx=\"64\" fill=\"#e5e7eb\"/><circle cx=\"64\" cy=\"50\" r=\"22\" fill=\"#9ca3af\"/><path d=\"M26 116c7-18 15-28 38-28s31 10 38 28\" fill=\"#9ca3af\"/></svg>')}" alt="Foto del estudiante" onerror="this.src='data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"128\" height=\"128\" viewBox=\"0 0 128 128\"><rect width=\"128\" height=\"128\" rx=\"64\" fill=\"#e5e7eb\"/><circle cx=\"64\" cy=\"50\" r=\"22\" fill=\"#9ca3af\"/><path d=\"M26 116c7-18 15-28 38-28s31 10 38 28\" fill=\"#9ca3af\"/></svg>')">
                </div>
                <h1>${estudiante.nombres} ${estudiante.apellidos}</h1>
                
                <div class="campo"><span class="etiqueta">Código:</span> ${estudiante.codigoEstudiante || ''}</div>
                <div class="campo"><span class="etiqueta">Cédula:</span> ${estudiante.cedulaEstudiante || ''}</div>
                <div class="campo"><span class="etiqueta">Fecha Nacimiento:</span> ${estudiante.fechaNacimiento || ''}</div>
                <div class="campo"><span class="etiqueta">Edad:</span> ${estudiante.edad || ''}</div>
                <div class="campo"><span class="etiqueta">Curso:</span> ${estudiante.curso || ''}</div>
                <div class="campo"><span class="etiqueta">Paralelo:</span> ${estudiante.paralelo || 'N/A'}</div>
                <div class="campo"><span class="etiqueta">Jornada:</span> ${estudiante.jornada || ''}</div>
                <div class="campo"><span class="etiqueta">Nacionalidad:</span> ${estudiante.nacionalidad || ''}</div>
                <div class="campo"><span class="etiqueta">Etnia:</span> ${estudiante.etnia || ''}</div>
                <div class="campo"><span class="etiqueta">Discapacidad:</span> ${estudiante.discapacidad || ''}</div>
                <div class="campo"><span class="etiqueta">Email:</span> ${estudiante.email || ''}</div>
                <div class="campo"><span class="etiqueta">Dirección Domiciliaria:</span> ${estudiante.direccion || ''}</div>
                
                <hr>
                <h3>Datos del Representante</h3>
                <div class="campo"><span class="etiqueta">Nombre:</span> ${estudiante.nombreRepresentante || ''}</div>
                <div class="campo"><span class="etiqueta">Cédula:</span> ${estudiante.cedulaRepresentante || ''}</div>
                <div class="campo"><span class="etiqueta">Teléfono:</span> ${estudiante.telefonoRepresentante || ''}</div>
                <div class="campo"><span class="etiqueta">Dirección Domiciliaria:</span> ${estudiante.direccionRepresentante || ''}</div>
                <div class="campo"><span class="etiqueta">Correo:</span> ${estudiante.correoRepresentante || ''}</div>

                <hr>
                <h3>Observaciones</h3>
                <div class="campo">${estudiante.descripcionObservaciones || 'Sin observaciones'}</div>
            `;

            // Auto-print option could be enabled here if desired, 
            // but for now user has control via button or we can do it after a slight delay
            setTimeout(() => {
                window.print();
            }, 500);
        });
    </script>
</body>

</html>